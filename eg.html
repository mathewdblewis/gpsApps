<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS Position Tracking</title>
</head>
<body>
    <h1>GPS Position Tracking</h1>
    <ul id="positionList"></ul>

    <script>
        const positionList = document.getElementById('positionList');
        let prevPosition;

        function showPosition(position) {
            const time = (new Date()).getTime() / 1000;
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            const alt = position.coords.altitude;

            let positionDiff = "";
            if (prevPosition) {
                const latDiff = lat - prevPosition.lat;
                const lonDiff = lon - prevPosition.lon;
                const altDiff = alt - prevPosition.alt;

                positionDiff = `, lat diff: ${latDiff}, lon diff: ${lonDiff}, alt diff: ${altDiff}`;
            }

            // Create a new list item to display the position
            const listItem = document.createElement('li');
            listItem.textContent = `lat: ${lat}, lon: ${lon}, alt: ${alt}, time: ${time}${positionDiff}`;

            // Add the new position to the list
            positionList.appendChild(listItem);

            // Update the previous position
            prevPosition = { lat, lon, alt };
        }

        function showError(error) {
            console.error('Error getting location:', error.message);
        }

        function updatePosition() {
            navigator.geolocation.getCurrentPosition(showPosition, showError);
        }

        // Update the position every second (1000 milliseconds)
        const intervalId = setInterval(updatePosition, 1000);

        // Stop updating after 30 seconds (for example)
        // setTimeout(() => { clearInterval(intervalId); }, 30 * 1000);
    </script>
</body>
</html>

